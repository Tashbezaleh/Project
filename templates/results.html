<script type="text/javascript">
    function submitRate(definition, answer, pattern, button) {
    	submitAForm("result_action", {
    		"definition" : definition,
    		"answer" : answer,
    		"action" : button.value,
            "pattern": pattern
    	}, searchDone);
        button.checked = false;
    }

    function setAddButton() {
        $("#add_defi").click(function (e) {
        e.preventDefault();
        $("#one [name='definition']").val("{{ definition }}");
        showPopup($($(this).attr('href')).clone(), 1);
        $("#one [name='definition']").val("");
        });
    }
    
    setAddButton();
</script>



{% if result_list_len == 0 %}
    <b> <h3>לא נמצאו תוצאות</h3> </b>
{% else %}
    <table class="peleg" style="text-align: center">
        <tr>
            <td width="100relative_length">
                דירוג:
            </td>
            <td width="200relative_length">
                פתרון:
            </td> 
            <td width="50relative_length">
                מקור:
            </td>  
        </tr>
        {% for entry, stars, int_stars in results_list %}
        <tr>
            <td>
                <fieldset class="rating">
                    {% for i in range(5, 0, -1) %} <!-- for some reason it is reversed, probably rtl shit, but that fixes it-->
                        <input type="radio" id="star{{ i }}_{{ entry.answer.decode('utf') }}" name="rating_{{ entry.answer.decode('utf') }}" value="rate{{ i }}" onclick="return false;"
                        onchange="submitRate('{{ entry.definition.decode('utf') }}', '{{ entry.answer.decode('utf') }}', '{{ pattern }}', this)" {% if int_stars == i %} checked {% endif %}/>
                        <label class="full" for="star{{ i }}_{{ entry.answer.decode('utf') }}" title="{{ stars }} כוכבים מאת {{ entry.raters_count }} מדרגים"></label>
                    {% endfor %}
                </fieldset>
            </td>
            <td>
                {{ entry.answer.decode('utf') }}
            </td>
            <td>
                (מאת {{ entry.source.decode('utf') }})
            </td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

</br>

 <input id="add_defi" href="#one" type="submit" value="יודע את התשובה ורוצה לעזור?" class = "peleg"/>

